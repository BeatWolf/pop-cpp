\documentclass[a4paper, 11pt]{article}

\usepackage[utf8]{inputenc}
\usepackage{verbatim}
\usepackage{moreverb}
\usepackage[english]{babel}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{listings} 
\usepackage{lastpage}
\usepackage[top=3cm, bottom=3cm, left=2cm, right=2cm]{geometry}
\usepackage{color}
\usepackage{xcolor}

%font change
\renewcommand{\familydefault}{\sfdefault}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
\newcommand{\nl}{\\[0.1cm]}
\newcommand{\s}{\vspace{0.3cm}}
\newcommand{\smore}{\vspace{0.6cm}}

\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}

\lstset{frame=single}

\lstdefinelanguage{popc}{%
   morekeywords={%
   %od
      od, url, power, @, 100, 80, machine, POPString, search
  },
  sensitive=true,
  morestring=[b]',
}

\addto\captionsenglish{%
  \renewcommand{\listfigurename}{}%
	\renewcommand\refname{}
}



%Header and footer 
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}

%Header definition
\renewcommand{\headrulewidth}{0.5pt}
\lhead{ViSaG : Virtual Safe GRID}
\rhead{Version 1.1}

%Footer definition
\renewcommand{\footrulewidth}{0.5pt}
\cfoot{\today}
\lfoot{Valentin Clément}
\rfoot{Page \thepage ~on \pageref{LastPage}}

%remove indent for paragraph
\parindent0ex 

%\setlength{\parskip2ex}








%\pagebreak



\begin{document}

\input{title}
%\newpage \thispagestyle{empty} \mbox{}\newpage



\tableofcontents
\pagebreak
\section{Introduction}
POP-C++ Virtual Secure (abbreviated POP-C++ VS) is a version of the POP-C++ middle-ware able to run parallel objects into virtual machines with a certain level of security for the communications between the nodes. The development of this version is the core of the ViSaG project. A prototype version of Virtual - POP-C++ has been developed during a bachelor thesis project in the summer 2010. This version is called VirtualPOPC-1\cite{vpopc1}.\s

This document is an add-on of the official POP-C++ User and Installation Manual\cite{popc_manual} to help the end user to set up a node with POP-C++ VS. \s

This document is structured as follows: 

\begin{itemize}
\item The next chapter explains the confidence link used between the nodes in a POP-C++ network. 
\item The third chapter aims to help the user to set the Admin Virtual Machine (Admin VM) and the original Worker Virtual Machine (Worker VM).
\item The fourth chapter explains the installation process of the original Worker Virtual Machine (Worker VM).
\item The fifth chapter is a glossary of the terms used in POP-C++ VS.
\end{itemize}

\section{Developer Notice}
POP-C++ VS must be used only with the Global Services. This forces tu use the resource discovery to create parallel object. We can't use object description like \textbf{od.url} as used in the POP-C++ standard version.

\section{The confidence link}

In order to be able to communicate between two POP-C++ nodes in secure mode, we need to set up the confidence link. The confidence link means that two POP-C++ nodes agree to communicate with each other with a certain level of security. \s

For the moment, the POP-C++ confidence link is set up with the exchange of the SSH Public Key. To set this confidence link between the computer A and the computer B, we should do the following actions : 

\begin{enumerate}
\item Generate the SSH Public and Private keys on each computer (command ssh-keygen). We will use the default option to generate the SSH keys. 
\item Send the SSH Public Key of A to B (use scp or another way to transfer the file from the computer A to the computer B). The SSH Public is located under \$HOME/.ssh/id\_rsa.pub
\item Send the SSH Public Key of B to A.
\item Write the SSH Public Key of A in the authorized\_keys file of B (located under \$HOME/.ssh/authorized\_keys)
\item Write the SSH Public Key of B into the authorized\_keys file of A. 
\end{enumerate}

Be sure to check your confidence link to avoid any problems during the execution of a POP-C++ application. 

\section{Set up a virtual node}
A node using POP-C++ VS is composed by minimum two virtual machines over an ESXi virtualization platform. These two virtual machines are called as follow : 

\begin{itemize}
\item \textbf{Admin VM} : This virtual machine will run the POP-C++ Global Services for the whole ESXi node. A node should have only one Admin VM (see Section \ref{lb:adminvm} to set up this VM).
\item \textbf{Worker VM} : This virtual machine will be managed by the Admin VM and will execute POP-C++ jobs (see Section \ref{lb:workervm} to set up this VM). 
\end{itemize}

The following of this chapter explains how to set up these two VM on a ESXi virtualization platform.


%--------------------
% INPUT FILE SECTION 
%--------------------
\input{admin_vm_install}

\input{worker_vm_install}

\input{compatibility}


\input{test}





\pagebreak
\section{Glossary}

\begin{itemize}
\item \textbf{POP-C++} : refers to POP-C++ in general or to the standard version of POP-C++.
\item \textbf{POP-C++ S} : refers to POP-C++ Secure version.
\item \textbf{POP-C++ V} : refers to POP-C++ Virtual version.
\item \textbf{POP-C++ VS} : refers to POP-C++ Virtual-Secure version.
\item \textbf{Admin VM} : refers to the Admin Virtual Machine managing the POP-C++ Virtual Node.
\item \textbf{Worker VM} : refers to the Worker Virtual Machine managed by the Admin VM.
\item \textbf{PSN} : POP-C++ Search Node.
\item \textbf{VPSN} : Virtual POP-C++ Search Node.
\item \textbf{SPSN} : Secure POP-C++ Search Node.
\item \textbf{VSPSN} : Virtual Secure POP-C++ Search Node.
\item \textbf{PSM} : POP-C++ Security Manager.
\item \textbf{VPSM} : Virtual POP-C++ Security Manager.
\item \textbf{JM} : Job Manager.
\item \textbf{VJM} : Virtual Job Manager.
\item \textbf{SJM} : Secure Job Manager.
\item \textbf{VSJM} : Virtual Secure Job Manager.
\end{itemize}

\pagebreak
\section{Table of figures}
\listoffigures{}

%
% 
%

\section{References}
\begin{thebibliography}{9}
\bibitem{vpopc1}
	Adrian Wyssen,
  	\emph{VirtualPOPC-1 : Project Report}.
	EIA-FR, Switzerland, 
	June-August 2010.
	
\bibitem{popc_manual}
	The POP-C++ Team,
  	\emph{Parallel Object Programming C++, User and installation Manual}.
	Grid and Cloud Computing Group, EIA-FR, Fribourg, Switzerland, 
	2010.
	
\bibitem{popcssh}
	Valentin Clément,
	\emph{POP-C++ over SSH Tunnel}.
	EIA-FR, Switzerland,
	September-November 2010.

\end{thebibliography}


%-- APPENDIX

\pagebreak
\appendix
\input{appendix.tex}




\end{document}
